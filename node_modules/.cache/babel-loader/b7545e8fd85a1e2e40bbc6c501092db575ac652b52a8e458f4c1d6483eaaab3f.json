{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Postings(){/*useState vars*/const[allPosts,setAllPosts]=useState([]);// unfiltered posts\nconst[posts,setPosts]=useState([]);const[spinnerVisible,setSpinner]=useState(false);// spinner state\nconst[textField,setTextField]=useState(\"\");// message box text\n/*handle text change*/const handleTextChange=e=>{setTextField(e.target.value);//console.log(textField); // success!\n};/*Post Modal Functions*/const[isModalOpen,setModalOpen]=useState(false);const openModal=()=>{setModalOpen(true);};const closeModal=()=>{setModalOpen(false);};/*useEffect hooks*/useEffect(()=>{// load posts on form load\nloadPosts();},[]);useEffect(()=>{const spinnerElement=document.getElementById('spinner-main');if(spinnerVisible){spinnerElement.classList.toggle('spinner-border',' ');}else{//console.log(\"Modal Closed\");\n}},[spinnerVisible]);/*hide spinner*/const hideSpinner=()=>{setSpinner(false);setModalOpen(false);// success!!!\nsetTextField(\"\");};/*Post Functions*/const loadPosts=()=>{// load post fun\naxios.get('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/').then(function(response){console.log(response.data);const postsWithId=response.data.map((post,index)=>({...post,id:index}));console.log(postsWithId[2]);setAllPosts(postsWithId);setPosts(postsWithId);}).catch(function(error){console.error('Error during post API request:',error);alert(\"Error Occured, Page Refresh Required!!\");//window.location.reload();\n});};function appendPost(messageData){//console.log(messageData); // post type, post text, caption, current time, current time, realPostID\nconst NextPostID=posts[posts.length-1][\"id\"]+1;//console.log(NextPostID);\nlet type=messageData[0]===\"image\"?\"image\":\"post\";setPosts([...posts,{id:NextPostID,caption:messageData[2],content:messageData[1],created:messageData[3],modified:messageData[4],postType:messageData[0],realPostID:messageData[5],type:type}]);}const sendPost=(messageType,messageText,currentTime)=>{// send post fun (success!!!)\nlet input=[];switch(messageType){case\"message\":// Normal Message\nif(messageText.length<11000&&messageText.length>0){const messageCaption=messageText.split('|')[0].trim();const messageText2=messageText.split('|')[1].trim();input=[messageType,messageText2,messageCaption,currentTime,currentTime];axios.post('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/',input).then(function(response){console.log(response.data);let realPostID=response.data[\"realPostID\"][0][\"postID\"];//console.log(realPostID);\nappendPost([...input,realPostID]);hideSpinner();}).catch(function(error){console.error('Error during post API request:',error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();});}else{alert(\"Invalid Input!\");}break;case\"URL\":// URL Message\nif(messageText.length<11000&&messageText.length>0){// Get Site Title API\naxios.post('http://edgewise.kesug.com/react-apis/url-title-api/?url='+messageText).then(function(response){//console.log(response.data[\"title\"]);\n// INSERT Rec API\ninput=[messageType,messageText,response.data[\"title\"],currentTime,currentTime];axios.post('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/',input).then(function(response){console.log(response.data);let realPostID=response.data[\"realPostID\"][0][\"postID\"];//console.log(realPostID);\nappendPost([...input,realPostID]);hideSpinner();}).catch(function(error){console.error('Error during post API request:',error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();});}).catch(function(error){console.error('Error during post API request:',error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();});}else{alert(\"Invalid Input!\");}break;default:break;}};const deletePost=(postID,realPostID,postType)=>{// delete post fun (success!!!)\nconst shouldDelete=window.confirm('Are you sure you want to delete this post?');if(shouldDelete&&postID!==null){// filter through JS\nsetPosts(posts.filter(post=>post.id!==postID));let input=[realPostID];if(postType!==\"image\"){// find post type\n// call delete api for post\naxios.put('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/',input).then(function(response){console.log(response.data);// success\n}).catch(function(error){console.error('Error during post API request:',error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();});}else{// call delete api for img\naxios.put('http://edgewise.kesug.com/react-apis/unc-communicator/img-manager/',input).then(function(response){console.log(response.data);}).catch(function(error){console.error('Error during post API request:',error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();});}}};const filterMessages=postType=>{// filter posts fun (success!!!)\nswitch(postType){case\"All\":setPosts(allPosts);// Reset to all posts\nbreak;case\"Text\":setPosts(allPosts.filter(post=>post.postType===\"message\"));break;case\"URL\":setPosts(allPosts.filter(post=>post.postType===\"URL\"));break;case\"image\":setPosts(allPosts.filter(post=>post.postType===\"image\"));break;default:break;}//scrollToBottom();\n};/*Image Uploader*/const fileInputRef=useRef(null);const imgUploader=(selectedFile,imgName,imgCaption,currentTime)=>{// image uploader fun\nconst imgFile=new FormData();// form data\nif(imgCaption.length>0){imgFile.append('task','insertImage');imgFile.append('file',selectedFile);imgFile.append('Image_Caption',imgCaption);imgFile.append('Image_Created',currentTime);imgFile.append('Image_Modified',currentTime);}else{imgFile.append('task','insertImage');imgFile.append('file',selectedFile);imgFile.append('Image_Caption',imgName);imgFile.append('Image_Created',currentTime);imgFile.append('Image_Modified',currentTime);}// Upload image data using axios\naxios.post('http://edgewise.kesug.com/react-apis/unc-communicator/img-manager/',imgFile).then(function(response){console.log(response.data);appendPost([\"image\",response.data[\"url\"],response.data[\"caption\"],response.data[\"time\"],response.data[\"time\"],response.data[\"realPostID\"]]);// add attributes\n//window.location.reload();\n}).catch(function(error){console.error('Error during post API request:',error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();});};function handleImageSelecter(){// Trigger the click event of the hidden file input\nsetSpinner(true);// spinner visible\nfileInputRef.current.click();};const handleFileChange=event=>{// handle the file change event of the input:file\nconst selectedFile=event.target.files[0];// date finder\nconst today=new Date();const date=today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();const time=today.getHours()+':'+today.getMinutes()+':'+today.getSeconds();const dateTime=date+' '+time;// call `imgUploader`\nimgUploader(selectedFile,selectedFile[\"name\"],textField,dateTime);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',color:'white',width:'100%',padding:'1%'},children:[\"Your Posts\",/*#__PURE__*/_jsx(FilterButton,{})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'1em',height:'70%',overflowY:'scroll',width:'100%',display:'flex',flexDirection:'column-reverse'},id:\"scroller\",children:/*#__PURE__*/_jsx(\"div\",{className:\"post-container\",id:\"post-container\",children:posts.map(post=>/*#__PURE__*/_jsxs(\"div\",{className:\"post\",id:post.id,children:[/*#__PURE__*/_jsxs(\"span\",{className:\"w-100 d-flex justify-content-between text-ellipsis\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge text-bg-primary\",style:{height:'fit-content'},children:post.postType}),/*#__PURE__*/_jsx(\"small\",{className:\"badge text-info text-wrap text-end\",children:post.caption})]}),/*#__PURE__*/_jsx(\"span\",{className:\"w-100 d-flex justify-content-end\",children:/*#__PURE__*/_jsx(PostControlButton,{postID:post.id,postType:post.postType,onDelete:deletePost,realPostID:post.realPostID,postInfo:post})}),post.postType==='image'?/*#__PURE__*/_jsx(\"img\",{src:'http://edgewise.kesug.com/react-apis/unc-communicator/img-manager/'+post.content,alt:post.content,className:\"post-img\"}):/*#__PURE__*/_jsx(\"p\",{style:{overflow:'hidden',textOverflow:'ellipsis'},children:post.postType==='URL'?/*#__PURE__*/_jsx(\"a\",{href:post.content,className:\"post-text-url\",children:post.content}):post.content}),/*#__PURE__*/_jsx(\"div\",{className:\"collapse\",id:\"collapse\"+post.id,style:{marginTop:'10px',width:'fit-content',cursor:'pointer'},\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#collapse\"+post.id,children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body p-1\",children:/*#__PURE__*/_jsxs(\"ul\",{style:{listStyle:'none',padding:'0',margin:'0'},children:[/*#__PURE__*/_jsxs(\"li\",{className:\"m-0 p-0 small\",children:[/*#__PURE__*/_jsx(\"i\",{children:\"Created On\"}),\" : \",post.created]}),/*#__PURE__*/_jsxs(\"li\",{className:\"m-0 p-0 small\",children:[/*#__PURE__*/_jsx(\"i\",{children:\"Last Modified\"}),\" : \",post.modified]})]})})})]},post.id))})}),/*#__PURE__*/_jsxs(\"span\",{className:\"d-flex w-100 justify-content-between gap-1 align-items-center position-fixed rounded-4\",style:{padding:'0px 20px',bottom:'0',height:'15%'},children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"message-box\",id:\"message-box\",value:textField,onChange:handleTextChange,className:\"form-control form-control-sm rounded-3\",placeholder:\"Caption | Message Content\"}),/*#__PURE__*/_jsx(AddPostButton,{})]}),isModalOpen?/*#__PURE__*/ // Post Modal--\n_jsx(\"div\",{className:\"post-modal rounded-4 shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-modal-content\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"w-100 d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"p\",{style:{padding:'0px',margin:'0px'},children:\"Select Post Type\"}),/*#__PURE__*/_jsx(\"span\",{className:\"\",id:\"spinner-main\",\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"btn glass-container\",style:{width:'fit-content',color:'white'},children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-x\"})})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"post-modal-list\",children:[/*#__PURE__*/_jsxs(\"li\",{onClick:()=>{var today=new Date();var date=today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();var time=today.getHours()+\":\"+today.getMinutes()+\":\"+today.getSeconds();var dateTime=date+' '+time;sendPost('message',textField,dateTime);setSpinner(true);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-chat-left-text-fill\"}),\" Text Message\"]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>{var today=new Date();var date=today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();var time=today.getHours()+\":\"+today.getMinutes()+\":\"+today.getSeconds();var dateTime=date+' '+time;sendPost('URL',textField,dateTime);setSpinner(true);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-link\"}),\" URL Message\"]}),/*#__PURE__*/_jsxs(\"li\",{onClick:()=>{handleImageSelecter();},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-image-fill\"}),/*#__PURE__*/_jsx(\"input\",{id:\"imgSel\",type:\"file\",ref:fileInputRef,style:{display:'none'},onChange:handleFileChange}),\"Select an Image for Upload\"]})]})]})}):/*#__PURE__*/_jsx(\"div\",{})]});function AddPostButton(){return/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-add-post shadow rounded-5\",style:{aspectRatio:'1'},onClick:openModal,children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-send-plus-fill\"})});}function PostControlButton(_ref){let{postID,postType,onDelete,realPostID,postInfo}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-post-control\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-three-dots\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#updatePostModal\",onClick:()=>sendUpModalData(realPostID,postInfo),children:\"Edit\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item\",onClick:()=>onDelete(postID,realPostID,postType),children:\"Delete\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\"#collapse\"+postID,\"aria-expanded\":\"false\",\"aria-controls\":\"collapseExample\",children:\"Info\"})})]})]});}function FilterButton(){return/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown p-0 m-0\",style:{height:'100%',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn glass-container\",style:{width:'fit-content',color:'white',height:'100%'},\"data-bs-toggle\":\"dropdown\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-filter\"})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"dropdown-menu gap-0 m-0\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item p-2 m-0\",onClick:()=>filterMessages('All'),children:\"All Messages\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item p-2 m-0\",onClick:()=>filterMessages('Text'),children:\"Text Messages\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item p-2 m-0\",onClick:()=>filterMessages('URL'),children:\"URL Messages\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"dropdown-item p-2 m-0\",onClick:()=>filterMessages('image'),children:\"Images\"})})]})]});}function sendUpModalData(postID,postInfo){//console.log(postInfo);\ndocument.getElementById('up_id').value=postID;document.getElementById('up_content').value=postInfo[\"content\"];document.getElementById('up_caption').value=postInfo[\"caption\"];document.getElementById('up_post_type').value=postInfo[\"postType\"];if(postInfo[\"postType\"]!==\"image\"){// msg | url\ndocument.getElementById('up_content').disabled=false;document.getElementById(\"up_content_img\").disabled=true;//document.getElementById(\"form-submit\").disabled = false;\n}else{// image\ndocument.getElementById('up_content').disabled=true;document.getElementById(\"up_content_img\").disabled=false;//document.getElementById(\"form-submit\").disabled = true;\n}}}export default Postings;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Postings","allPosts","setAllPosts","posts","setPosts","spinnerVisible","setSpinner","textField","setTextField","handleTextChange","e","target","value","isModalOpen","setModalOpen","openModal","closeModal","loadPosts","spinnerElement","document","getElementById","classList","toggle","hideSpinner","get","then","response","console","log","data","postsWithId","map","post","index","id","catch","error","alert","appendPost","messageData","NextPostID","length","type","caption","content","created","modified","postType","realPostID","sendPost","messageType","messageText","currentTime","input","messageCaption","split","trim","messageText2","window","location","reload","deletePost","postID","shouldDelete","confirm","filter","put","filterMessages","fileInputRef","imgUploader","selectedFile","imgName","imgCaption","imgFile","FormData","append","handleImageSelecter","current","click","handleFileChange","event","files","today","Date","date","getFullYear","getMonth","getDate","time","getHours","getMinutes","getSeconds","dateTime","children","style","display","justifyContent","alignItems","color","width","padding","FilterButton","height","overflowY","flexDirection","className","PostControlButton","onDelete","postInfo","src","alt","overflow","textOverflow","href","marginTop","cursor","listStyle","margin","bottom","name","onChange","placeholder","AddPostButton","onClick","ref","aspectRatio","_ref","sendUpModalData","disabled"],"sources":["C:/React/UNC-Communicator/src/dash-components/Postings.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Postings() {\r\n\r\n  /*useState vars*/\r\n  const [allPosts, setAllPosts] = useState([]); // unfiltered posts\r\n  const [posts, setPosts] = useState([]);\r\n  const [spinnerVisible, setSpinner] = useState(false); // spinner state\r\n  const [textField, setTextField] = useState(\"\"); // message box text\r\n\r\n  /*handle text change*/\r\n  const handleTextChange = (e) => {\r\n    setTextField(e.target.value);\r\n    //console.log(textField); // success!\r\n  }\r\n\r\n  /*Post Modal Functions*/\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n\r\n  const openModal = () => {\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  /*useEffect hooks*/\r\n  useEffect(() => { // load posts on form load\r\n    loadPosts();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const spinnerElement = document.getElementById('spinner-main');\r\n    if (spinnerVisible) {\r\n      spinnerElement.classList.toggle('spinner-border',' ');\r\n    }else{\r\n      //console.log(\"Modal Closed\");\r\n    }\r\n  }, [spinnerVisible]);\r\n\r\n  /*hide spinner*/\r\n  const hideSpinner = () => {\r\n    setSpinner(false);\r\n    setModalOpen(false); // success!!!\r\n    setTextField(\"\");\r\n  }\r\n\r\n  /*Post Functions*/\r\n\r\n  const loadPosts = () => { // load post fun\r\n    axios.get('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/')\r\n      .then(function (response) {\r\n        console.log(response.data);\r\n        const postsWithId = response.data.map((post, index) => ({ ...post, id: index }));\r\n        console.log(postsWithId[2]);\r\n        setAllPosts(postsWithId);\r\n        setPosts(postsWithId);\r\n      })\r\n      .catch(function (error) {\r\n        console.error('Error during post API request:', error);alert(\"Error Occured, Page Refresh Required!!\");//window.location.reload();\r\n      });\r\n  };\r\n\r\n  function appendPost(messageData){\r\n    //console.log(messageData); // post type, post text, caption, current time, current time, realPostID\r\n    const NextPostID = posts[posts.length - 1][\"id\"] + 1;\r\n    //console.log(NextPostID);\r\n    let type = messageData[0] === \"image\" ? \"image\" : \"post\";\r\n    setPosts([...posts, {id:NextPostID,caption:messageData[2],content:messageData[1],created:messageData[3],modified:messageData[4],postType:messageData[0],realPostID:messageData[5],type:type}]);\r\n  }\r\n\r\n  const sendPost = (messageType,messageText,currentTime) => { // send post fun (success!!!)\r\n    let input = [];\r\n    switch (messageType) {\r\n      case \"message\": // Normal Message\r\n        if(messageText.length < 11000 && messageText.length > 0){\r\n          const messageCaption = messageText.split('|')[0].trim();\r\n          const messageText2 = messageText.split('|')[1].trim();\r\n          input = [messageType,messageText2,messageCaption,currentTime,currentTime];\r\n          axios.post('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/',input)\r\n          .then(function (response) {\r\n            console.log(response.data);\r\n            let realPostID = response.data[\"realPostID\"][0][\"postID\"];\r\n            //console.log(realPostID);\r\n            appendPost([...input,realPostID]);\r\n            hideSpinner();\r\n          })\r\n          .catch(function (error) {\r\n            console.error('Error during post API request:', error);\r\n            alert(\"Error Occured, Page Refresh Required\");\r\n            window.location.reload();\r\n          });  \r\n        }else{\r\n          alert(\"Invalid Input!\");\r\n        }\r\n        break;\r\n\r\n      case \"URL\": // URL Message\r\n        if(messageText.length < 11000 && messageText.length > 0){\r\n          // Get Site Title API\r\n          axios.post('http://edgewise.kesug.com/react-apis/url-title-api/?url=' + messageText)\r\n          .then(function (response) {\r\n            //console.log(response.data[\"title\"]);\r\n            // INSERT Rec API\r\n            input = [messageType,messageText,response.data[\"title\"],currentTime,currentTime];\r\n            axios.post('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/',input)\r\n            .then(function (response) {\r\n              console.log(response.data);\r\n              let realPostID = response.data[\"realPostID\"][0][\"postID\"];\r\n              //console.log(realPostID);\r\n              appendPost([...input,realPostID]);\r\n              hideSpinner();\r\n            })\r\n            .catch(function (error) {\r\n              console.error('Error during post API request:', error);\r\n              alert(\"Error Occured, Page Refresh Required\");\r\n              window.location.reload();\r\n            });\r\n          })\r\n          .catch(function (error) {\r\n            console.error('Error during post API request:', error);\r\n            alert(\"Error Occured, Page Refresh Required\");\r\n            window.location.reload();\r\n          });\r\n        }else{\r\n          alert(\"Invalid Input!\");\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }    \r\n  }\r\n\r\n  const deletePost = (postID,realPostID,postType) => { // delete post fun (success!!!)\r\n    const shouldDelete = window.confirm('Are you sure you want to delete this post?');\r\n    if (shouldDelete && postID !== null) {\r\n      // filter through JS\r\n      setPosts(posts.filter(post => post.id !== postID));\r\n\r\n      let input = [realPostID];\r\n      if(postType !== \"image\"){// find post type\r\n        // call delete api for post\r\n        axios.put('http://edgewise.kesug.com/react-apis/unc-communicator/post-manager/',input)\r\n        .then(function (response) {\r\n          console.log(response.data); // success\r\n        })\r\n        .catch(function (error) {\r\n          console.error('Error during post API request:', error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();\r\n        });\r\n      }else{\r\n        // call delete api for img\r\n        axios.put('http://edgewise.kesug.com/react-apis/unc-communicator/img-manager/',input)\r\n        .then(function (response) {\r\n          console.log(response.data);\r\n        })\r\n        .catch(function (error) {\r\n          console.error('Error during post API request:', error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();\r\n        });\r\n      }      \r\n    }\r\n  }\r\n\r\n  const filterMessages = (postType) => { // filter posts fun (success!!!)\r\n    switch (postType) {\r\n      case \"All\":\r\n        setPosts(allPosts); // Reset to all posts\r\n        break;\r\n\r\n      case \"Text\":\r\n        setPosts(allPosts.filter(post => post.postType === \"message\"));\r\n        break;\r\n\r\n      case \"URL\":\r\n        setPosts(allPosts.filter(post => post.postType === \"URL\"));\r\n        break;\r\n\r\n      case \"image\":\r\n        setPosts(allPosts.filter(post => post.postType === \"image\"));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    //scrollToBottom();\r\n  }\r\n  /*Image Uploader*/\r\n  const fileInputRef = useRef(null);\r\n  const imgUploader = (selectedFile, imgName, imgCaption, currentTime) => { // image uploader fun\r\n    const imgFile = new FormData(); // form data\r\n    if (imgCaption.length > 0) {\r\n      imgFile.append('task','insertImage');\r\n      imgFile.append('file', selectedFile);\r\n      imgFile.append('Image_Caption', imgCaption);\r\n      imgFile.append('Image_Created', currentTime);\r\n      imgFile.append('Image_Modified', currentTime);\r\n    } else {\r\n      imgFile.append('task','insertImage');\r\n      imgFile.append('file', selectedFile);\r\n      imgFile.append('Image_Caption', imgName);\r\n      imgFile.append('Image_Created', currentTime);\r\n      imgFile.append('Image_Modified', currentTime);\r\n    }\r\n    // Upload image data using axios\r\n    axios.post('http://edgewise.kesug.com/react-apis/unc-communicator/img-manager/',imgFile)\r\n    .then(function (response) {\r\n      console.log(response.data);\r\n      appendPost([\"image\",response.data[\"url\"],response.data[\"caption\"],response.data[\"time\"],response.data[\"time\"],response.data[\"realPostID\"]]); // add attributes\r\n      //window.location.reload();\r\n    })\r\n    .catch(function (error) {\r\n      console.error('Error during post API request:', error);alert(\"Error Occured, Page Refresh Required\");window.location.reload();\r\n    });    \r\n  };\r\n\r\n  function handleImageSelecter(){ // Trigger the click event of the hidden file input\r\n    setSpinner(true); // spinner visible\r\n    fileInputRef.current.click();\r\n  };\r\n\r\n  const handleFileChange = (event) => { // handle the file change event of the input:file\r\n    const selectedFile = event.target.files[0];\r\n    // date finder\r\n    const today = new Date();\r\n    const date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\r\n    const time = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\r\n    const dateTime = date + ' ' + time;\r\n    // call `imgUploader`\r\n    imgUploader(selectedFile, selectedFile[\"name\"], textField, dateTime);\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <h1 style={{ display:'flex', justifyContent:'space-between',alignItems:'center', color: 'white', width: '100%', padding:'1%' }}>\r\n      Your Posts \r\n      <FilterButton/>\r\n    </h1>\r\n    <div style={{ padding: '1em', height: '70%', overflowY: 'scroll', width: '100%', display:'flex', flexDirection:'column-reverse' }} id='scroller'>\r\n      <div className='post-container' id='post-container'>\r\n        {posts.map(post => (\r\n          <div className=\"post\" key={post.id} id={post.id}>\r\n            <span className='w-100 d-flex justify-content-between text-ellipsis'>\r\n              <span className=\"badge text-bg-primary\" style={{height:'fit-content'}}>{post.postType}</span>\r\n              <small className='badge text-info text-wrap text-end'>{post.caption}</small>\r\n            </span>              \r\n            <span className='w-100 d-flex justify-content-end'>\r\n              <PostControlButton postID={post.id} postType={post.postType} onDelete={deletePost} realPostID={post.realPostID} postInfo={post}/>\r\n            </span>\r\n            {post.postType === 'image' ? \r\n            <img src={'http://edgewise.kesug.com/react-apis/unc-communicator/img-manager/' + post.content} alt={post.content} className='post-img'/>\r\n            : \r\n            <p style={{overflow:'hidden',textOverflow:'ellipsis'}}>{ post.postType === 'URL' ? ( <a href={post.content} className='post-text-url' >{post.content}</a> ) : post.content}</p>\r\n            }\r\n            <div className=\"collapse\" id={\"collapse\" + post.id} style={{marginTop:'10px',width:'fit-content',cursor:'pointer'}} data-bs-toggle=\"collapse\" data-bs-target={\"#collapse\" + post.id}>\r\n              <div className=\"card card-body p-1\">\r\n                <ul style={{listStyle:'none',padding:'0',margin:'0'}}>\r\n                  <li className='m-0 p-0 small'><i>Created On</i> : {post.created}</li>\r\n                  <li className='m-0 p-0 small'><i>Last Modified</i> : {post.modified}</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n    <span className='d-flex w-100 justify-content-between gap-1 align-items-center position-fixed rounded-4' style={{padding:'0px 20px',  bottom:'0', height:'15%' }}>      \r\n      <textarea name=\"message-box\" id=\"message-box\" value={textField} onChange={handleTextChange} className=\"form-control form-control-sm rounded-3\" placeholder='Caption | Message Content'/>\r\n      <AddPostButton />\r\n    </span>\r\n    {isModalOpen ? ( // Post Modal--\r\n      <div className=\"post-modal rounded-4 shadow\">\r\n        <div className=\"post-modal-content\">\r\n          <span className='w-100 d-flex justify-content-between align-items-center'>\r\n            <p style={{padding:'0px',margin:'0px'}}>Select Post Type</p>\r\n            <span className=\"\" id='spinner-main' aria-hidden=\"true\"></span>\r\n            <button onClick={closeModal} className='btn glass-container' style={{width:'fit-content',color:'white'}}>\r\n              <i className=\"bi bi-x\"></i>\r\n            </button>\r\n          </span>\r\n          <ul className='post-modal-list'>\r\n            <li onClick={() => {\r\n                                var today = new Date();\r\n                                var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\r\n                                var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n                                var dateTime = date+' '+time;\r\n                                sendPost('message', textField, dateTime);\r\n                                setSpinner(true);\r\n                        }}><i className=\"bi bi-chat-left-text-fill\"></i> Text Message</li>\r\n            <li onClick={() => {\r\n                                var today = new Date();\r\n                                var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\r\n                                var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n                                var dateTime = date+' '+time;\r\n                                sendPost('URL', textField, dateTime);\r\n                                setSpinner(true);\r\n                        }}><i className=\"bi bi-link\"></i> URL Message</li>\r\n            <li onClick={() => { handleImageSelecter(); }}>\r\n              <i className=\"bi bi-image-fill\"></i>\r\n              <input id=\"imgSel\" type=\"file\" ref={fileInputRef} style={{ display: 'none' }} onChange={handleFileChange} />\r\n              Select an Image for Upload\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    ) : (<div></div>)}\r\n    </>\r\n  );\r\n\r\n  function AddPostButton() {\r\n    return (\r\n      <button className='btn btn-add-post shadow rounded-5' style={{ aspectRatio: '1' }} onClick={openModal}>\r\n        <i className=\"bi bi-send-plus-fill\"></i>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  function PostControlButton({ postID, postType, onDelete,realPostID, postInfo }) {\r\n    return (\r\n      <div className=\"dropdown\">\r\n        <button className=\"btn btn-post-control\" type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n          <i className=\"bi bi-three-dots\"></i>\r\n        </button>\r\n        <ul className=\"dropdown-menu\">\r\n          <li><p className=\"dropdown-item\" data-bs-toggle=\"modal\" data-bs-target=\"#updatePostModal\" onClick={()=>sendUpModalData(realPostID, postInfo)}>Edit</p></li>\r\n          <li><p className=\"dropdown-item\" onClick={() => onDelete(postID,realPostID,postType)}>Delete</p></li>\r\n          <li><p className=\"dropdown-item\" data-bs-toggle=\"collapse\" data-bs-target={\"#collapse\" + postID} aria-expanded=\"false\" aria-controls=\"collapseExample\">Info</p></li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function FilterButton(){\r\n    return(\r\n      <div className=\"dropdown p-0 m-0\" style={{height:'100%',display:'flex',alignItems:'center'}}>\r\n        <button className=\"btn glass-container\" style={{width:'fit-content',color:'white',height:'100%'}}  data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n          <i className=\"bi bi-filter\"></i>\r\n        </button>\r\n        <ul className=\"dropdown-menu gap-0 m-0\">\r\n          <li><p className=\"dropdown-item p-2 m-0\" onClick={() => filterMessages('All')}>All Messages</p></li>\r\n          <li><p className=\"dropdown-item p-2 m-0\" onClick={() => filterMessages('Text')}>Text Messages</p></li>\r\n          <li><p className=\"dropdown-item p-2 m-0\" onClick={() => filterMessages('URL')}>URL Messages</p></li>\r\n          <li><p className=\"dropdown-item p-2 m-0\" onClick={() => filterMessages('image')}>Images</p></li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function sendUpModalData(postID, postInfo){\r\n    //console.log(postInfo);\r\n    document.getElementById('up_id').value = postID;\r\n    document.getElementById('up_content').value = postInfo[\"content\"];\r\n    document.getElementById('up_caption').value = postInfo[\"caption\"];\r\n    document.getElementById('up_post_type').value = postInfo[\"postType\"];\r\n\r\n    if(postInfo[\"postType\"] !== \"image\"){ // msg | url\r\n      document.getElementById('up_content').disabled = false;\r\n      document.getElementById(\"up_content_img\").disabled = true;\r\n      //document.getElementById(\"form-submit\").disabled = false;\r\n    }else{ // image\r\n      document.getElementById('up_content').disabled = true;\r\n      document.getElementById(\"up_content_img\").disabled = false;\r\n      //document.getElementById(\"form-submit\").disabled = true;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Postings;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}